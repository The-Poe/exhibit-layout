"use strict";(globalThis.webpackChunkreact17_template=globalThis.webpackChunkreact17_template||[]).push([[929],{929:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var a=t(62),c=t(753),o=t(791),n=t(434),l=t(523),r=t(783),i=t(945);const m={chkoutContainer:"Checkout_chkoutContainer__F7uxr",sectionProgress:"Checkout_sectionProgress__o6FfY",progress:"Checkout_progress__2Ngd3",progessStatuses:"Checkout_progessStatuses__ZzHzp",progessStatus:"Checkout_progessStatus__RVg1V",progressDot:"Checkout_progressDot__haNL5",chkoutContent:"Checkout_chkoutContent__hmeOA",chkoutItems:"Checkout_chkoutItems__YIo6k",chkoutCustomInfo:"Checkout_chkoutCustomInfo__9qkqO",customerFormWrapper:"Checkout_customerFormWrapper__bGE0h",formTitle:"Checkout_formTitle__2IGBI",formField:"Checkout_formField__tfbhw",coupleEffect:"Checkout_coupleEffect__h9S3E",isCoupleEffect:"Checkout_isCoupleEffect__b72PF",subTotalSection:"Checkout_subTotalSection__N2HIz",summing:"Checkout_summing__URn1w",mh:"Checkout_mh__oGT+V",total:"Checkout_total__yo5-6",chkoutConfirm:"Checkout_chkoutConfirm__MdXrU",btnRewind:"Checkout_btnRewind__WzR0p",btnNext:"Checkout_btnNext__NA+6u",btnConfirm:"Checkout_btnConfirm__Wr1ab"},d={chkoutItem:"CheckoutItem_chkoutItem__lhtBZ",deleteItemWrapper:"CheckoutItem_deleteItemWrapper__TaahH",deleteItem:"CheckoutItem_deleteItem__jMwzK",itemPic:"CheckoutItem_itemPic__ssNuR",itemInfo:"CheckoutItem_itemInfo__6R5fQ",itemInfoTitle:"CheckoutItem_itemInfoTitle__tffa2",itemInfoDate:"CheckoutItem_itemInfoDate__1vXXz",mh:"CheckoutItem_mh__V-cUF",inlineBar:"CheckoutItem_inlineBar__quKLk",itemInfoType:"CheckoutItem_itemInfoType__Jr268",itemInfoPrice:"CheckoutItem_itemInfoPrice__DBnlv",itemAdjust:"CheckoutItem_itemAdjust__n+nIp",minusWrapper:"CheckoutItem_minusWrapper__XzFLA",minus:"CheckoutItem_minus__M2EN9",itemQty:"CheckoutItem_itemQty__s+GlN",plus:"CheckoutItem_plus__RgTNt"};var u=t(184);const h=e=>{const{id:s,picUrl:t,title:a,startDate:c,startMon:o,endDate:l,endMonth:i,price:m,quantity:h,totalPrice:p}=e,x=(0,n.I0)();return(0,u.jsxs)("div",{className:`${d.chkoutItem}`,children:[(0,u.jsx)("div",{className:`${d.deleteItemWrapper}`,children:(0,u.jsx)("div",{className:`${d.deleteItem}`,onClick:()=>{x(r.U.deleteItemFromCart(s))},children:"\u2716"})}),(0,u.jsx)("div",{className:`${d.itemPic}`,style:{width:"12vmax",height:"auto",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:`url(${e.picUrl}`}}),(0,u.jsxs)("div",{className:`${d.itemInfo}`,children:[(0,u.jsx)("div",{className:`${d.itemInfoTitle}`,children:e.title}),(0,u.jsxs)("div",{className:`${d.itemInfoDate}`,children:[(0,u.jsx)("span",{className:`${d.startDay}`,children:e.startDate}),(0,u.jsxs)("span",{className:`${d.startMon}`,children:[" ",e.startMonth]}),(0,u.jsx)("div",{className:`${d.inlineBar}`}),(0,u.jsx)("span",{className:`${d.endDay}`,children:e.endDate}),(0,u.jsxs)("span",{className:`${d.endMon}`,children:[" ",e.endMonth]})]}),(0,u.jsx)("div",{className:`${d.itemInfoType}`,children:"\u5168\u7968"})]}),(0,u.jsxs)("div",{className:`${d.itemInfoPrice}`,children:[(0,u.jsx)("span",{className:`${d.infoCurrency}`,children:"NT$"}),(0,u.jsx)("span",{className:`${d.infoTotal}`,children:e.totalPrice})]}),(0,u.jsxs)("div",{className:`${d.itemAdjust}`,children:[(0,u.jsx)("div",{className:`${d.minusWrapper} mh`,onClick:()=>{x(r.U.removeOneItemFromCart(s))},children:(0,u.jsx)("div",{className:`${d.minus}`})}),(0,u.jsx)("div",{className:`${d.itemQty} mh`,children:e.quantity}),(0,u.jsx)("div",{className:`${d.plus} mh`,onClick:()=>{x(r.U.addItemToCart({product:{id:s,picUrl:t,title:a,startDate:c,startMon:o,endDate:l,endMonth:i,price:m,quantity:h,totalPrice:p},quantity:1}))},children:"+"})]})]})},p=()=>{const[e,s]=(0,o.useState)(1),t=(0,n.v9)((e=>e.authUserReducer.authUser)),d=(0,n.v9)((e=>e.cartReducer)),{items:p,sumPrice:x}=d,_=(0,n.I0)(),[j,f]=(0,o.useState)(""),[C,N]=(0,o.useState)(""),[k,$]=(0,o.useState)(""),[v,g]=(0,o.useState)(""),[I,b]=(0,o.useState)(!1),[y,D]=(0,o.useState)(0),[T,F]=(0,o.useState)(""),[S,P]=(0,o.useState)(null),[R,M]=(0,o.useState)(""),[W,U]=(0,o.useState)(0),w=(0,o.useRef)(),E=(0,o.useRef)(),q=(0,o.useRef)(),O=(0,o.useRef)(),z=(0,o.useRef)(),A=(0,o.useRef)(),B=(0,o.useRef)();(0,o.useEffect)((()=>{!async function(){console.log("queryForDocs() called");const e=(0,a.IO)((0,a.hJ)(c.R,"campaigns"),(0,a.ar)("couponCode","==",v),(0,a.b9)(1)),s=await(0,a.PL)(e);console.log("couponCode:",v),console.log("querySnapshot.docs:",s.docs),0===s.docs.length?(D(0),b(!1),U(x)):s.docs.length>0&&s.forEach((e=>{console.log(`Query Doc ${e.id} contains ${JSON.stringify(e.data())}`),D(e.data().couponDiscount),"minus"===e.data().couponType.toLowerCase()&&U(x-y),b(!0)}))}()}),[v,y,x]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:`${m.chkoutContainer}`,children:[(0,u.jsxs)("div",{className:`${m.sectionProgress}`,children:[(0,u.jsx)("div",{className:`${m.progress}`}),(0,u.jsxs)("div",{className:`${m.progessStatuses}`,children:[(0,u.jsxs)("div",{className:`${m.progessStatus}`,children:[(0,u.jsx)("div",{className:`${m.progressDot} bgPink`}),"\u78ba\u8a8d\u8a02\u55ae"]}),(0,u.jsxs)("div",{className:`${m.progessStatus}`,children:[(0,u.jsx)("div",{className:`${m.progressDot} ${e>=2?"bgPink":"bgWhite"} `}),"\u586b\u5beb\u8a02\u55ae\u8cc7\u8a0a"]}),(0,u.jsxs)("div",{className:`${m.progessStatus}`,children:[(0,u.jsx)("div",{className:`${m.progressDot} ${e>=3?"bgPink":"bgWhite"}`}),"\u586b\u5beb\u4ed8\u6b3e\u8cc7\u8a0a"]}),(0,u.jsxs)("div",{className:`${m.progessStatus}`,children:[(0,u.jsx)("div",{className:`${m.progressDot} ${e>=4?"bgPink":"bgWhite"}`}),"\u5b8c\u6210\u8a02\u8cfc"]})]})]}),(0,u.jsx)("div",{className:`${m.chkoutContent}`,children:(0,u.jsx)("div",{className:`${m.chkoutItems}`,children:p&&p.map((e=>(0,u.jsx)(h,{id:e.id,picUrl:e.picUrl,title:e.title,startDate:e.startDate,startMon:e.startMonth,endDate:e.endDate,endMonth:e.endMonth,price:e.price,quantity:e.quantity,totalPrice:e.totalPrice},e.id)))})}),(0,u.jsxs)("div",{className:`${m.chkoutCustomInfo}`,children:[(0,u.jsxs)("div",{className:`${m.customerFormWrapper}`,children:[2===e&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:`${m.formTitle}`,children:"\u8a02\u8cfc\u4eba\u8cc7\u8a0a"}),(0,u.jsxs)("form",{action:"",children:[(0,u.jsxs)("div",{className:`${m.formField}`,children:[(0,u.jsx)("label",{htmlFor:"email",children:"Email"}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{type:"email",name:"email",placeholder:"example@gmail.com",ref:w,onChange:e=>{f(w.current.value),console.log(j)},value:j})]}),(0,u.jsxs)("div",{className:`${m.formField}`,children:[(0,u.jsx)("label",{htmlFor:"name",children:"\u59d3\u540d"}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{type:"text",name:"name",placeholder:"\u8acb\u8f38\u5165\u59d3\u540d",ref:E,onChange:()=>{N(E.current.value)},value:C})]}),(0,u.jsxs)("div",{className:`${m.formField}`,children:[(0,u.jsx)("label",{htmlFor:"contact",children:"\u9023\u7d61\u96fb\u8a71"}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{type:"tel",name:"contact",placeholder:"\u8acb\u8f38\u5165\u96fb\u8a71",ref:q,onChange:()=>{$(q.current.value)},value:k})]}),(0,u.jsxs)("div",{className:`${m.formField}`,children:[(0,u.jsx)("label",{htmlFor:"coupon",children:"\u512a\u60e0\u78bc"}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{type:"text",name:"coupon",placeholder:"TG87526",ref:O,onChange:()=>{g(O.current.value),console.log("couponCodeOnChange called")},value:v}),(0,u.jsxs)("div",{className:`${m.coupleEffect}`,children:[I&&"\u512a\u60e0\u78bc\u5df2\u751f\u6548",!I&&"\u7121\u6548\u512a\u60e0\u78bc"]})]})]})]}),3===e&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:`${m.formTitle}`,children:"\u4ed8\u6b3e\u8cc7\u8a0a"}),(0,u.jsxs)("form",{action:"",children:[(0,u.jsxs)("div",{className:`${m.formField}`,children:[(0,u.jsx)("label",{htmlFor:"credit",children:"\u4fe1\u7528\u5361\u5e33\u865f"}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{type:"text",name:"credit",placeholder:"xxxx-xxxx-xxxx-xxxx",ref:z,onChange:()=>{F(z.current.value)},value:T})]}),(0,u.jsxs)("div",{className:`${m.formField}`,children:[(0,u.jsx)("label",{htmlFor:"validDate",children:"\u6709\u6548\u65e5\u671f"}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{type:"month",name:"validDate",placeholder:"(MM/YY)",ref:A,onChange:()=>{P(A.current.value)},value:S})]}),(0,u.jsxs)("div",{className:`${m.formField}`,children:[(0,u.jsx)("label",{htmlFor:"security",children:"\u5b89\u5168\u78bc"}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{type:"password",name:"security",max:"3",placeholder:"\u8acb\u8f38\u5165\u5b89\u5168\u78bc",ref:B,onChange:()=>{M(B.current.value)},value:R})]})]})]})]}),(0,u.jsxs)("div",{className:`${m.subTotalSection}`,children:[(0,u.jsxs)("div",{className:`${m.summing}`,children:[(0,u.jsx)("span",{className:`${m.subtotalText} mh`,children:"\u5c0f\u8a08"}),(0,u.jsxs)("span",{className:`${m.subtotalInfo} mh`,children:[(0,u.jsx)("span",{className:`${m.infoCurrency}`,children:"NT$"}),(0,u.jsx)("span",{className:`${m.infoTotal}`,children:x})]})]}),1!==e&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:`${m.summing}`,children:[(0,u.jsx)("span",{className:`${m.subtotalText} mh`,children:"\u6298\u6263"}),(0,u.jsxs)("span",{className:`${m.subtotalInfo} mh`,children:[(0,u.jsx)("span",{className:`${m.infoCurrency}`,children:"-NT$"}),(0,u.jsx)("span",{className:`${m.infoCurrency}`,children:y})]})]}),(0,u.jsxs)("div",{className:`${m.summing} total`,children:[(0,u.jsx)("span",{className:`${m.subtotalText} mh`,children:"\u7e3d\u91d1\u984d"}),(0,u.jsxs)("span",{className:`${m.subtotalInfo} mh`,children:[(0,u.jsx)("span",{className:`${m.infoCurrency}`,children:"NT$"}),(0,u.jsx)("span",{className:`${m.infoTotal}`,children:W})]})]})]})]})]})]}),(0,u.jsxs)("div",{className:`${m.chkoutConfirm}`,children:[(0,u.jsx)("div",{onClick:()=>{e>1&&s(e-1),console.log("checkoutStatus:",e)},className:`${1===e&&"invisible"} ${m.btnRewind}   borPurple textPurple`,children:"\u8fd4\u56de"}),e<3&&(0,u.jsx)("div",{onClick:()=>{e<3&&s(e+1),console.log("checkoutStatus:",e)},className:`${m.btnNext} textWhite bgPurple`,children:"\u4e0b\u4e00\u6b65"}),3===e&&(0,u.jsx)(l.rU,{to:"/checkoutDone",children:(0,u.jsx)("div",{onClick:()=>{const e={email:j,cusomerName:C,phone:k,couponCode:v,couponDiscount:y,creditCard:T,creditCardDate:S,secureCode:R,finalPrice:W,items:p};let s="";"null"!==t&&(s=JSON.parse(t).email);const o=(0,a.hJ)(c.R,`orders/${s}/orderDetails`);(async()=>{(0,a.ET)(o,e).then((e=>{console.log("the addDoc() promise has fullfilled! "),console.log("the response is:",e),console.log("the response.id is:",e.id),_(i.v.replaceOrderId({orderId:e.id}))})).catch((e=>console.log("the addDoc() got error:",e)))})(),_(i.v.replaceOrderItems({items:p})),_(r.U.replaceCart({items:[],totalQuantity:0,sumPrice:0}))},className:`${m.btnConfirm} textWhite bgPurple`,children:"\u78ba\u8a8d\u7d50\u5e33"})})]})]})}}}]);
//# sourceMappingURL=929.cd5de92f.chunk.js.map