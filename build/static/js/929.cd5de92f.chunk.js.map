{"version":3,"file":"static/js/929.cd5de92f.chunk.js","mappings":"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","sources":["webpack://react17-template/./src/components/pages/checkout/Checkout.module.scss?a7fe","webpack://react17-template/./src/components/pages/checkout/CheckoutItem.module.scss?4cfc","components/pages/checkout/CheckoutItem.js","components/pages/checkout/Checkout.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"chkoutContainer\":\"Checkout_chkoutContainer__F7uxr\",\"sectionProgress\":\"Checkout_sectionProgress__o6FfY\",\"progress\":\"Checkout_progress__2Ngd3\",\"progessStatuses\":\"Checkout_progessStatuses__ZzHzp\",\"progessStatus\":\"Checkout_progessStatus__RVg1V\",\"progressDot\":\"Checkout_progressDot__haNL5\",\"chkoutContent\":\"Checkout_chkoutContent__hmeOA\",\"chkoutItems\":\"Checkout_chkoutItems__YIo6k\",\"chkoutCustomInfo\":\"Checkout_chkoutCustomInfo__9qkqO\",\"customerFormWrapper\":\"Checkout_customerFormWrapper__bGE0h\",\"formTitle\":\"Checkout_formTitle__2IGBI\",\"formField\":\"Checkout_formField__tfbhw\",\"coupleEffect\":\"Checkout_coupleEffect__h9S3E\",\"isCoupleEffect\":\"Checkout_isCoupleEffect__b72PF\",\"subTotalSection\":\"Checkout_subTotalSection__N2HIz\",\"summing\":\"Checkout_summing__URn1w\",\"mh\":\"Checkout_mh__oGT+V\",\"total\":\"Checkout_total__yo5-6\",\"chkoutConfirm\":\"Checkout_chkoutConfirm__MdXrU\",\"btnRewind\":\"Checkout_btnRewind__WzR0p\",\"btnNext\":\"Checkout_btnNext__NA+6u\",\"btnConfirm\":\"Checkout_btnConfirm__Wr1ab\"};","// extracted by mini-css-extract-plugin\nexport default {\"chkoutItem\":\"CheckoutItem_chkoutItem__lhtBZ\",\"deleteItemWrapper\":\"CheckoutItem_deleteItemWrapper__TaahH\",\"deleteItem\":\"CheckoutItem_deleteItem__jMwzK\",\"itemPic\":\"CheckoutItem_itemPic__ssNuR\",\"itemInfo\":\"CheckoutItem_itemInfo__6R5fQ\",\"itemInfoTitle\":\"CheckoutItem_itemInfoTitle__tffa2\",\"itemInfoDate\":\"CheckoutItem_itemInfoDate__1vXXz\",\"mh\":\"CheckoutItem_mh__V-cUF\",\"inlineBar\":\"CheckoutItem_inlineBar__quKLk\",\"itemInfoType\":\"CheckoutItem_itemInfoType__Jr268\",\"itemInfoPrice\":\"CheckoutItem_itemInfoPrice__DBnlv\",\"itemAdjust\":\"CheckoutItem_itemAdjust__n+nIp\",\"minusWrapper\":\"CheckoutItem_minusWrapper__XzFLA\",\"minus\":\"CheckoutItem_minus__M2EN9\",\"itemQty\":\"CheckoutItem_itemQty__s+GlN\",\"plus\":\"CheckoutItem_plus__RgTNt\"};","import styles from \"./CheckoutItem.module.scss\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { cartActions } from \"store/cartSlice\";\r\n\r\nconst CheckoutItem = (props) => {\r\n  const {\r\n    id,\r\n    picUrl,\r\n    title,\r\n    startDate,\r\n    startMon,\r\n    endDate,\r\n    endMonth,\r\n    price,\r\n    quantity,\r\n    totalPrice,\r\n  } = props;\r\n  const dispatch = useDispatch();\r\n  const plusOneItemHandler = () => {\r\n    dispatch(\r\n      cartActions.addItemToCart({\r\n        product: {\r\n          id,\r\n          picUrl,\r\n          title,\r\n          startDate,\r\n          startMon,\r\n          endDate,\r\n          endMonth,\r\n          price,\r\n          quantity,\r\n          totalPrice,\r\n        },\r\n        quantity: 1,\r\n      })\r\n    );\r\n  };\r\n  const minusOneItemHandler = () => {\r\n    dispatch(cartActions.removeOneItemFromCart(id));\r\n  };\r\n\r\n  const deleteItemHandler = () => {\r\n    dispatch(cartActions.deleteItemFromCart(id));\r\n  };\r\n\r\n  return (\r\n    <div className={`${styles.chkoutItem}`}>\r\n      <div className={`${styles.deleteItemWrapper}`}>\r\n        <div className={`${styles.deleteItem}`} onClick={deleteItemHandler}>\r\n          ✖\r\n        </div>\r\n      </div>\r\n      <div\r\n        className={`${styles.itemPic}`}\r\n        style={{\r\n          width: \"12vmax\",\r\n          height: \"auto\",\r\n          backgroundRepeat: \"no-repeat\",\r\n          backgroundPosition: \"center\",\r\n          backgroundSize: \"cover\",\r\n          backgroundImage: `url(${props.picUrl}`,\r\n        }}\r\n      ></div>\r\n      <div className={`${styles.itemInfo}`}>\r\n        <div className={`${styles.itemInfoTitle}`}>{props.title}</div>\r\n        <div className={`${styles.itemInfoDate}`}>\r\n          <span className={`${styles.startDay}`}>{props.startDate}</span>\r\n          <span className={`${styles.startMon}`}> {props.startMonth}</span>\r\n          <div className={`${styles.inlineBar}`}></div>\r\n          <span className={`${styles.endDay}`}>{props.endDate}</span>\r\n          <span className={`${styles.endMon}`}> {props.endMonth}</span>\r\n        </div>\r\n        <div className={`${styles.itemInfoType}`}>全票</div>\r\n      </div>\r\n      <div className={`${styles.itemInfoPrice}`}>\r\n        <span className={`${styles.infoCurrency}`}>NT$</span>\r\n        <span className={`${styles.infoTotal}`}>{props.totalPrice}</span>\r\n      </div>\r\n      <div className={`${styles.itemAdjust}`}>\r\n        <div\r\n          className={`${styles.minusWrapper} mh`}\r\n          onClick={minusOneItemHandler}\r\n        >\r\n          <div className={`${styles.minus}`}></div>\r\n        </div>\r\n        <div className={`${styles.itemQty} mh`}>{props.quantity}</div>\r\n        <div className={`${styles.plus} mh`} onClick={plusOneItemHandler}>\r\n          +\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default CheckoutItem;\r\n","import {\r\n  addDoc,\r\n  collection,\r\n  getDocs,\r\n  limit,\r\n  query,\r\n  where,\r\n} from \"firebase/firestore\";\r\nimport { firestore } from \"firebaseConfig\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { cartActions } from \"store/cartSlice\";\r\nimport { orderInfoActions } from \"store/orderInfoSlice\";\r\nimport styles from \"./Checkout.module.scss\";\r\nimport CheckoutItem from \"./CheckoutItem\";\r\n\r\nconst Checkout = () => {\r\n  const [checkoutStatus, setCheckoutStatus] = useState(1);\r\n  const authUser = useSelector((state) => state.authUserReducer.authUser);\r\n\r\n  const cart = useSelector((state) => state.cartReducer);\r\n  const { items, sumPrice } = cart;\r\n  const dispatch = useDispatch();\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [cusomerName, setCusomerName] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [couponCode, setCouponCode] = useState(\"\");\r\n  const [isCouponEffect, setIsCouponEffect] = useState(false);\r\n  const [couponDiscount, setCouponDiscount] = useState(0);\r\n  const [creditCard, setCreditCard] = useState(\"\");\r\n  const [creditCardDate, setCreditCardDate] = useState(null);\r\n  const [secureCode, setSecureCode] = useState(\"\");\r\n  const [finalPrice, setfinalPrice] = useState(0);\r\n  //TODO: validation\r\n\r\n  const emailInputRef = useRef();\r\n  const customerNameInputRef = useRef();\r\n  const phoneInputRef = useRef();\r\n  const couponCodeInputRef = useRef();\r\n  const creditCardInputRef = useRef();\r\n  const creditCardDateInputRef = useRef();\r\n  const secureCodeInputRef = useRef();\r\n\r\n  const emailOnChange = (e) => {\r\n    setEmail(emailInputRef.current.value);\r\n    console.log(email);\r\n  };\r\n  const customerNameOnChange = () => {\r\n    setCusomerName(customerNameInputRef.current.value);\r\n  };\r\n  const phoneOnChange = () => {\r\n    setPhone(phoneInputRef.current.value);\r\n  };\r\n  const couponCodeOnChange = () => {\r\n    setCouponCode(couponCodeInputRef.current.value);\r\n    console.log(\"couponCodeOnChange called\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    /*To look up Coupon discount*/\r\n    /****************************/\r\n    /**Query with multiple docs**/\r\n    /****************************/\r\n    async function queryForDocs() {\r\n      console.log(\"queryForDocs() called\");\r\n      const customerOrderQuery = query(\r\n        collection(firestore, \"campaigns\"),\r\n        where(\"couponCode\", \"==\", couponCode),\r\n        limit(1)\r\n      );\r\n      const querySnapshot = await getDocs(customerOrderQuery);\r\n      console.log(\"couponCode:\", couponCode);\r\n      console.log(\"querySnapshot.docs:\", querySnapshot.docs);\r\n      if (querySnapshot.docs.length === 0) {\r\n        setCouponDiscount(0);\r\n        setIsCouponEffect(false);\r\n        setfinalPrice(sumPrice);\r\n      } else if (querySnapshot.docs.length > 0) {\r\n        querySnapshot.forEach((snap) => {\r\n          console.log(\r\n            `Query Doc ${snap.id} contains ${JSON.stringify(snap.data())}`\r\n          );\r\n          setCouponDiscount(snap.data().couponDiscount);\r\n          if (snap.data().couponType.toLowerCase() === \"minus\") {\r\n            setfinalPrice(sumPrice - couponDiscount);\r\n          }\r\n          setIsCouponEffect(true);\r\n        });\r\n      }\r\n    }\r\n    queryForDocs();\r\n  }, [couponCode, couponDiscount, sumPrice]);\r\n\r\n  const creditCardOnChange = () => {\r\n    setCreditCard(creditCardInputRef.current.value);\r\n  };\r\n  const creditCardDateOnChange = () => {\r\n    setCreditCardDate(creditCardDateInputRef.current.value);\r\n  };\r\n  const secureCodeOnChange = () => {\r\n    setSecureCode(secureCodeInputRef.current.value);\r\n  };\r\n\r\n  const nextStepHandler = () => {\r\n    if (checkoutStatus < 3) setCheckoutStatus(checkoutStatus + 1);\r\n    console.log(\"checkoutStatus:\", checkoutStatus);\r\n  };\r\n\r\n  const lastStepHandler = () => {\r\n    if (checkoutStatus > 1) setCheckoutStatus(checkoutStatus - 1);\r\n    console.log(\"checkoutStatus:\", checkoutStatus);\r\n  };\r\n\r\n  const onConfirmOrder = () => {\r\n    const orderDetail = {\r\n      email,\r\n      cusomerName,\r\n      phone,\r\n      couponCode,\r\n      couponDiscount,\r\n      creditCard,\r\n      creditCardDate,\r\n      secureCode,\r\n      finalPrice,\r\n      items,\r\n    };\r\n\r\n    /*send to Firestore*/\r\n    let authUserEmail = \"\";\r\n    if (authUser !== \"null\") {\r\n      authUserEmail = JSON.parse(authUser).email;\r\n    }\r\n    //collection(自動配給子集合使用,ID可以用addDoc回傳的id)\r\n    const usersCollection = collection(\r\n      firestore,\r\n      `orders/${authUserEmail}/orderDetails`\r\n    );\r\n    const addDocToFirebase = async () => {\r\n      addDoc(usersCollection, orderDetail) //用隨機ID新增\r\n        .then((response) => {\r\n          console.log(\"the addDoc() promise has fullfilled! \");\r\n          console.log(\"the response is:\", response);\r\n          console.log(\"the response.id is:\", response.id);\r\n          dispatch(\r\n            orderInfoActions.replaceOrderId({\r\n              orderId: response.id,\r\n            })\r\n          );\r\n        }) //won't run when offline\r\n        .catch((err) => console.log(\"the addDoc() got error:\", err));\r\n    };\r\n    addDocToFirebase();\r\n\r\n    dispatch(orderInfoActions.replaceOrderItems({ items }));\r\n\r\n    dispatch(\r\n      cartActions.replaceCart({\r\n        items: [],\r\n        totalQuantity: 0,\r\n        sumPrice: 0,\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={`${styles.chkoutContainer}`}>\r\n        <div className={`${styles.sectionProgress}`}>\r\n          <div className={`${styles.progress}`}></div>\r\n          <div className={`${styles.progessStatuses}`}>\r\n            <div className={`${styles.progessStatus}`}>\r\n              <div className={`${styles.progressDot} bgPink`}></div>\r\n              確認訂單\r\n            </div>\r\n            <div className={`${styles.progessStatus}`}>\r\n              <div\r\n                className={`${styles.progressDot} ${\r\n                  checkoutStatus >= 2 ? \"bgPink\" : \"bgWhite\"\r\n                } `}\r\n              ></div>\r\n              填寫訂單資訊\r\n            </div>\r\n            <div className={`${styles.progessStatus}`}>\r\n              <div\r\n                className={`${styles.progressDot} ${\r\n                  checkoutStatus >= 3 ? \"bgPink\" : \"bgWhite\"\r\n                }`}\r\n              ></div>\r\n              填寫付款資訊\r\n            </div>\r\n            <div className={`${styles.progessStatus}`}>\r\n              <div\r\n                className={`${styles.progressDot} ${\r\n                  checkoutStatus >= 4 ? \"bgPink\" : \"bgWhite\"\r\n                }`}\r\n              ></div>\r\n              完成訂購\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={`${styles.chkoutContent}`}>\r\n          <div className={`${styles.chkoutItems}`}>\r\n            {items &&\r\n              items.map((item) => (\r\n                <CheckoutItem\r\n                  key={item.id}\r\n                  id={item.id}\r\n                  picUrl={item.picUrl}\r\n                  title={item.title}\r\n                  startDate={item.startDate}\r\n                  startMon={item.startMonth}\r\n                  endDate={item.endDate}\r\n                  endMonth={item.endMonth}\r\n                  price={item.price}\r\n                  quantity={item.quantity}\r\n                  totalPrice={item.totalPrice}\r\n                />\r\n              ))}\r\n          </div>\r\n        </div>\r\n        <div className={`${styles.chkoutCustomInfo}`}>\r\n          <div className={`${styles.customerFormWrapper}`}>\r\n            {checkoutStatus === 2 && (\r\n              <>\r\n                <div className={`${styles.formTitle}`}>訂購人資訊</div>\r\n                <form action=\"\">\r\n                  <div className={`${styles.formField}`}>\r\n                    <label htmlFor=\"email\">Email</label>\r\n                    <br />\r\n                    <input\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      placeholder=\"example@gmail.com\"\r\n                      ref={emailInputRef}\r\n                      onChange={emailOnChange}\r\n                      value={email}\r\n                    ></input>\r\n                  </div>\r\n                  <div className={`${styles.formField}`}>\r\n                    <label htmlFor=\"name\">姓名</label>\r\n                    <br />\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      placeholder=\"請輸入姓名\"\r\n                      ref={customerNameInputRef}\r\n                      onChange={customerNameOnChange}\r\n                      value={cusomerName}\r\n                    ></input>\r\n                  </div>\r\n                  <div className={`${styles.formField}`}>\r\n                    <label htmlFor=\"contact\">連絡電話</label>\r\n                    <br />\r\n                    <input\r\n                      type=\"tel\"\r\n                      name=\"contact\"\r\n                      placeholder=\"請輸入電話\"\r\n                      ref={phoneInputRef}\r\n                      onChange={phoneOnChange}\r\n                      value={phone}\r\n                    ></input>\r\n                  </div>\r\n                  <div className={`${styles.formField}`}>\r\n                    <label htmlFor=\"coupon\">優惠碼</label>\r\n                    <br />\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"coupon\"\r\n                      placeholder=\"TG87526\"\r\n                      ref={couponCodeInputRef}\r\n                      onChange={couponCodeOnChange}\r\n                      value={couponCode}\r\n                    ></input>\r\n                    <div className={`${styles.coupleEffect}`}>\r\n                      {isCouponEffect && \"優惠碼已生效\"}\r\n                      {!isCouponEffect && \"無效優惠碼\"}\r\n                    </div>\r\n                  </div>\r\n                </form>\r\n              </>\r\n            )}\r\n            {checkoutStatus === 3 && (\r\n              <>\r\n                <div className={`${styles.formTitle}`}>付款資訊</div>\r\n                <form action=\"\">\r\n                  <div className={`${styles.formField}`}>\r\n                    <label htmlFor=\"credit\">信用卡帳號</label>\r\n                    <br />\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"credit\"\r\n                      placeholder=\"xxxx-xxxx-xxxx-xxxx\"\r\n                      ref={creditCardInputRef}\r\n                      onChange={creditCardOnChange}\r\n                      value={creditCard}\r\n                    ></input>\r\n                  </div>\r\n                  <div className={`${styles.formField}`}>\r\n                    <label htmlFor=\"validDate\">有效日期</label>\r\n                    <br />\r\n                    <input\r\n                      type=\"month\"\r\n                      name=\"validDate\"\r\n                      placeholder=\"(MM/YY)\"\r\n                      ref={creditCardDateInputRef}\r\n                      onChange={creditCardDateOnChange}\r\n                      value={creditCardDate}\r\n                    ></input>\r\n                  </div>\r\n                  <div className={`${styles.formField}`}>\r\n                    <label htmlFor=\"security\">安全碼</label>\r\n                    <br />\r\n                    <input\r\n                      type=\"password\"\r\n                      name=\"security\"\r\n                      max=\"3\"\r\n                      placeholder=\"請輸入安全碼\"\r\n                      ref={secureCodeInputRef}\r\n                      onChange={secureCodeOnChange}\r\n                      value={secureCode}\r\n                    ></input>\r\n                  </div>\r\n                </form>\r\n              </>\r\n            )}\r\n          </div>\r\n          <div className={`${styles.subTotalSection}`}>\r\n            <div className={`${styles.summing}`}>\r\n              <span className={`${styles.subtotalText} mh`}>小計</span>\r\n              <span className={`${styles.subtotalInfo} mh`}>\r\n                <span className={`${styles.infoCurrency}`}>NT$</span>\r\n                <span className={`${styles.infoTotal}`}>{sumPrice}</span>\r\n              </span>\r\n            </div>\r\n            {checkoutStatus !== 1 && (\r\n              <>\r\n                <div className={`${styles.summing}`}>\r\n                  <span className={`${styles.subtotalText} mh`}>折扣</span>\r\n                  <span className={`${styles.subtotalInfo} mh`}>\r\n                    <span className={`${styles.infoCurrency}`}>-NT$</span>\r\n                    <span className={`${styles.infoCurrency}`}>\r\n                      {couponDiscount}\r\n                    </span>\r\n                  </span>\r\n                </div>\r\n                <div className={`${styles.summing} total`}>\r\n                  <span className={`${styles.subtotalText} mh`}>總金額</span>\r\n                  <span className={`${styles.subtotalInfo} mh`}>\r\n                    <span className={`${styles.infoCurrency}`}>NT$</span>\r\n                    <span className={`${styles.infoTotal}`}>{finalPrice}</span>\r\n                  </span>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className={`${styles.chkoutConfirm}`}>\r\n        <div\r\n          onClick={lastStepHandler}\r\n          className={`${checkoutStatus === 1 && \"invisible\"} ${\r\n            styles.btnRewind\r\n          }   borPurple textPurple`}\r\n        >\r\n          返回\r\n        </div>\r\n        {checkoutStatus < 3 && (\r\n          <div\r\n            onClick={nextStepHandler}\r\n            className={`${styles.btnNext} textWhite bgPurple`}\r\n          >\r\n            下一步\r\n          </div>\r\n        )}\r\n        {checkoutStatus === 3 && (\r\n          <Link to=\"/checkoutDone\">\r\n            <div\r\n              onClick={onConfirmOrder}\r\n              className={`${styles.btnConfirm} textWhite bgPurple`}\r\n            >\r\n              確認結帳\r\n            </div>\r\n          </Link>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default Checkout;\r\n"],"names":["props","id","picUrl","title","startDate","startMon","endDate","endMonth","price","quantity","totalPrice","dispatch","useDispatch","className","styles","onClick","cartActions","style","width","height","backgroundRepeat","backgroundPosition","backgroundSize","backgroundImage","startMonth","product","checkoutStatus","setCheckoutStatus","useState","authUser","useSelector","state","authUserReducer","cart","cartReducer","items","sumPrice","email","setEmail","cusomerName","setCusomerName","phone","setPhone","couponCode","setCouponCode","isCouponEffect","setIsCouponEffect","couponDiscount","setCouponDiscount","creditCard","setCreditCard","creditCardDate","setCreditCardDate","secureCode","setSecureCode","finalPrice","setfinalPrice","emailInputRef","useRef","customerNameInputRef","phoneInputRef","couponCodeInputRef","creditCardInputRef","creditCardDateInputRef","secureCodeInputRef","useEffect","async","console","log","customerOrderQuery","query","collection","firestore","where","limit","querySnapshot","getDocs","docs","length","forEach","snap","JSON","stringify","data","couponType","toLowerCase","queryForDocs","map","item","action","htmlFor","type","name","placeholder","ref","onChange","e","current","value","max","to","orderDetail","authUserEmail","parse","usersCollection","addDoc","then","response","orderInfoActions","orderId","catch","err","addDocToFirebase","totalQuantity"],"sourceRoot":""}